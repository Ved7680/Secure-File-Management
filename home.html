<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Encode Decode</title>
  
    <!-- CSS -->
    <link href="CSS/home.css" rel="stylesheet">

    <!--  boxicons  -->
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
</head>
<body>
  <div class="container">
    <header class="title">
      <div class="isp"><img src="https://cdn-icons-png.flaticon.com/512/8434/8434476.png" alt="" class="crypto-icon"></div>
      <div class="isp webname"><span>CryptoSec</span></div>
      <div class="isp heading title1">Cyber Security</div>
      <div class="isp heading title2">ISP 2022</div>
      <div class="isp heading title3">Group - 3</div>
    </header>
<!--     level1 -->
    <section id="Level1">
<!--       encode -->
      <div class="content" id="encodel1">
        <div class="box box1">
          <div class="head">
            <div>Plaintext</div>
          </div>
          <div class="line"></div>
          <div class="text">
            <form>
            <textarea placeholder="Enter your message..." id="plaintext"></textarea>
            </form>
          </div>
        </div>
        <div class="box box2">
          <div class="operation">
            <div><span>Encode</span></div>
            <div><a href="#" onclick="decoderl1()">Decode</a></div>
          </div>
          <div class="line"></div>
          <div class="algo">
            <div class="type">
              <div><a href="#" onclick="level1encode()">Click Me!</a></div>   
             </div>
            <div class="algorithem">
              <div class="caesar"><i class='bx bx-minus minus' onclick="substract()"></i></div>
              <div class="caesar digit" id="shift"></div>
              <div class="caesar alphabet"><span id="a"></span><i class='bx bx-chevrons-right atob'></i><span id="z"></span></div>
              <div class="caesar"><i class='bx bx-plus plus' onclick="add()"></i></div>
            </div>
            <div class="level">
              <div class="level1"><span>Level 1</span></div>
              <div class="level2"><a href="#" onclick="level2()">Level 2</a></div>
            </div>
          </div>
        </div>
        <div class="box box3">
          <div class="head">
            <div>Ciphertext</div>
          </div>
          <div class="line"></div>
          <div class="text">
            <form>
              <textarea id="ciphertext"></textarea>
            </form>
          </div>
        </div>
      </div>
      
<!--       decode -->
      <div class="content" id="decodel1">
        <div class="box box1">
          <div class="head">
            <div>Ciphertext</div>
          </div>
          <div class="line"></div>
          <div class="text">
            <form>
            <textarea placeholder="Enter your message..." id="ciphertext2"></textarea>
            </form>
          </div>
        </div>
        <div class="box box2">
          <div class="operation">
            <div><a href="#" onclick="encoderl1()">Encode</a></div>
            <div><span>Decode</span></div>
          </div>
          <div class="line"></div>
          <div class="algo">
            <div class="type">
              <div><a href="#" onclick="level1decode()">Click Me!</a></div>   
             </div>
            <div class="algorithem">
              <div class="caesar"><i class='bx bx-minus minus' onclick="substract2()"></i></div>
              <div class="caesar digit" id="shift2"></div>
              <div class="caesar alphabet"><span id="a2"></span><i class='bx bx-chevrons-right atob'></i><span id="z2"></span></div>
              <div class="caesar"><i class='bx bx-plus plus' onclick="add2()"></i></div>
            </div>
            <div class="level">
              <div class="level1"><span>Level 1</span></div>
              <div class="level2"><a href="#" onclick="level2()">Level 2</a></div>
            </div>
          </div>
        </div>
        <div class="box box3">
          <div class="head">
            <div>Plaintext</div>
          </div>
          <div class="line"></div>
          <div class="text">
            <form>
              <textarea id="plaintext2"></textarea>
            </form>
          </div>
        </div>
      </div> 
    </section>
<!--     level2 -->
    <section id="Level2">
<!--       encode -->
      <div class="content" id="encodel2">
        <div class="box box1">
          <div class="head">
            <div>Plaintext</div>
          </div>
          <div class="line"></div>
          <div class="text">
            <form>
            <textarea placeholder="Enter your message..." id="plaintext3"></textarea>
            </form>
          </div>
        </div>
        <div class="box box2">
          <div class="operation">
            <div><span>Encode</span></div>
            <div><a href="#" onclick="decoderl2()">Decode</a></div>
          </div>
          <div class="line"></div>
          <div class="algo">
            <div class="type">
              <div><a href="#" onclick="level2encode()">Click Me!</a></div>   
             </div>
            <div class="algorithem">
              <div class="caesar"><i class='bx bx-minus minuss1' onclick="substract3()"></i></div>
              <div class="caesar digit" id="shift3"></div>
              <div class="caesar alphabet"><span id="a3"></span><i class='bx bx-chevrons-right atob'></i><span id="z3"></span></div>
              <div class="caesar"><i class='bx bx-plus pluss1' onclick="add3()"></i></div>
            </div>
            <div class="railCipher">
              <div class="rail"><i class='bx bx-minus minuss2' onclick="substractkey1()"></i></div>
              <div class="rail digit" id="keyShift1"></div>
              <div class="rail"><i class='bx bx-plus pluss2' onclick="addkey1()"></i></div>
            </div>
            
            <div class="level">
              <div class="level1"><a href="#" onclick="level1()">Level 1</a></div>
              <div class="level2"><span>Level 2</span></div>
            </div>
          </div>
        </div>
        <div class="box box3">
          <div class="head">
            <div>Ciphertext</div>
          </div>
          <div class="line"></div>
          <div class="text">
            <form>
              <textarea id="ciphertext3"></textarea>
            </form>
          </div>
        </div>
      </div>
      
<!--       decode -->
      <div class="content" id="decodel2">
        <div class="box box1">
          <div class="head">
            <div>Ciphertext</div>
          </div>
          <div class="line"></div>
          <div class="text">
            <form>
            <textarea placeholder="Enter your message..." id="ciphertext4"></textarea>
            </form>
          </div>
        </div>
        <div class="box box2">
          <div class="operation">
            <div><a href="#" onclick="encoderl2()">Encode</a></div>
            <div><span>Decode</span></div>
          </div>
          <div class="line"></div>
          <div class="algo">
            <div class="type">
              <div><a href="#" onclick="level2decode()">Click Me!</a></div>   
             </div>
            <div class="algorithem">
              <div class="caesar"><i class='bx bx-minus minuss1' onclick="substract4()"></i></div>
              <div class="caesar digit" id="shift4"></div>
              <div class="caesar alphabet"><span id="a4"></span><i class='bx bx-chevrons-right atob'></i><span id="z4"></span></div>
              <div class="caesar"><i class='bx bx-plus pluss1' onclick="add4()"></i></div>
            </div>
            <div class="railCipher">
              <div class="rail"><i class='bx bx-minus minuss2' onclick="substractkey2()"></i></div>
              <div class="rail digit" id="keyShift2"></div>
              <div class="rail"><i class='bx bx-plus pluss2' onclick="addkey2()"></i></div>
            </div>
            <div class="level">
              <div class="level1"><a href="#" onclick="level1()">Level 1</a></div>
              <div class="level2"><span>Level 2</span></div>
            </div>
          </div>
        </div>
        <div class="box box3">
          <div class="head">
            <div>Plaintext</div>
          </div>
          <div class="line"></div>
          <div class="text">
            <form>
              <textarea id="plaintext4"></textarea>
            </form>
          </div>
        </div>
      </div> 
    </section>
    <footer>
      <div class="footer">
        <div class="para para1">Caesar cipher: Encode and decode online</div>
        <div class="para para2"><p> Method in which each letter in the plaintext is replaced by a letter some fixed number of positions down the alphabet. The method is named after Julius Caesar, who used it in his private correspondence. </p></div>
      </div>
    </footer>
  </div>
  <script>
    document.getElementById("a").innerHTML = "a";
document.getElementById("a2").innerHTML = "a";
document.getElementById("a3").innerHTML = "a";
document.getElementById("a4").innerHTML = "a";
let x = 0;
let x2 = 0;
let x3 = 0;
let x4 = 0;
let key1 = 0;
let key2 = 0;
let char = 'a';
let char2 = 'a';
let char3 = 'a';
let char4 = 'a';
let ascii = char.charCodeAt(0);
let ascii2 = char.charCodeAt(0);
let ascii3 = char.charCodeAt(0);
let ascii4 = char.charCodeAt(0);
document.getElementById("shift").innerHTML = x;
document.getElementById("shift2").innerHTML = x2;
document.getElementById("shift3").innerHTML = x3;
document.getElementById("shift4").innerHTML = x4;
document.getElementById("z").innerHTML = String.fromCharCode(ascii); 
document.getElementById("z2").innerHTML = String.fromCharCode(ascii2); 
document.getElementById("z3").innerHTML = String.fromCharCode(ascii3); 
document.getElementById("z4").innerHTML = String.fromCharCode(ascii4);
document.getElementById("keyShift1").innerHTML = key1;
document.getElementById("keyShift2").innerHTML = key2;

// levels
let Level1 = document.getElementById('Level1');
let Level2 = document.getElementById('Level2');
Level2.style.display = 'none';

// level 1

let encodel1 = document.getElementById('encodel1');
let decodel1 = document.getElementById('decodel1');
decodel1.style.display = 'none';
    
// level 2
    
let encodel2 = document.getElementById('encodel2');
let decodel2 = document.getElementById('decodel2');
decodel2.style.display = 'none';

function add(){
  if(x < 25){
    x += 1;
    ascii += 1;
    document.getElementById("shift").innerHTML = x;
    document.getElementById("z").innerHTML = String.fromCharCode(ascii);
  }
}

function substract(){
  if(x > 0){
    x -= 1;
    ascii-=1;
    document.getElementById("shift").innerHTML = x;
    document.getElementById("z").innerHTML = String.fromCharCode(ascii);
  }
}

function add2(){
  if(x2 < 25){
    x2 += 1;
    ascii2 += 1;
    document.getElementById("shift2").innerHTML = x2;
    document.getElementById("z2").innerHTML = String.fromCharCode(ascii2);
  }
}

function substract2(){
  if(x2 > 0){
    x2 -= 1;
    ascii2-=1;
    document.getElementById("shift2").innerHTML = x2;
    document.getElementById("z2").innerHTML = String.fromCharCode(ascii2);
  }
}

function add3(){
  if(x3 < 25){
    x3 += 1;
    ascii3 += 1;
    document.getElementById("shift3").innerHTML = x3;
    document.getElementById("z3").innerHTML = String.fromCharCode(ascii3);
  }
}

function substract3(){
  if(x3 > 0){
    x3 -= 1;
    ascii3-=1;
    document.getElementById("shift3").innerHTML = x3;
    document.getElementById("z3").innerHTML = String.fromCharCode(ascii3);
  }
}

function addkey1(){
  let len = document.getElementById("plaintext3").value.length;
  if(key1 < len){
    key1 += 1;
    document.getElementById("keyShift1").innerHTML = key1;
  }
}

function substractkey1(){
  if(key1 > 0){
    key1 -= 1;
    document.getElementById("keyShift1").innerHTML = key1;
  }
}

function add4(){
  if(x4 < 25){
    x4 += 1;
    ascii4 += 1;
    document.getElementById("shift4").innerHTML = x4;
    document.getElementById("z4").innerHTML = String.fromCharCode(ascii4);
  }
}

function substract4(){
  if(x4 > 0){
    x4 -= 1;
    ascii4-=1;
    document.getElementById("shift4").innerHTML = x4;
    document.getElementById("z4").innerHTML = String.fromCharCode(ascii4);
  }
}

function addkey2(){
  let len = document.getElementById("ciphertext4").value.length;
  if(key2 < len){
    key2 += 1;
    document.getElementById("keyShift2").innerHTML = key2;
  }
}

function substractkey2(){
  if(key2 > 0){
    key2 -= 1;
    document.getElementById("keyShift2").innerHTML = key2;
  }
}

// level 1 Encode
function level1encode(){
  let text = document.getElementById('plaintext').value;
  document.getElementById('ciphertext').innerHTML = caesar_cipher_encrypt(text, x);
}

// level 2 Encode
function level2encode(){
  let text = document.getElementById('plaintext3').value;
  // console.log(caesar_cipher_encrypt(text, x3));
  document.getElementById('ciphertext3').innerHTML = rail_fance_encrypt(caesar_cipher_encrypt(text, x3), key1);
  
}

function caesar_cipher_encrypt(text, shift){
  let res = ""
  for(let i = 0; i < text.length; i++){
      let char = text.charAt(i);
      if(lowerCase(char)){
          res += String.fromCharCode((char.charCodeAt(0)+shift-97)%26 + 97);
      }
      else if(upperCase(char)){
          res += String.fromCharCode((char.charCodeAt(0)+shift-65)%26 + 65);
      }
      else{
          res += char;
      }
  }
  return res;
}

function rail_fance_encrypt(text, key){
  let col = Math.floor((text.length+1)/key);
  let row = key;
  let k = 0;
  let res = "";
  let matrix = new Array(col);
  for(let i = 0; i < col; i ++){
      matrix[i] = new Array(row);
  }
  for(let j = 0; j < col; j ++){
      for(let i = 0; i < row; i ++){
          if(k < text.length){
              matrix[i][j] = text.charAt(k);
              k++;
          }
          else{
              matrix[i][j] = '~';
          }
      }
  }
  for(let i = 0; i < row; i ++){
      for(let j = 0; j < col; j ++){
          if(matrix[i][j] == '~'){
              continue;
          }
          else{
              res += matrix[i][j];
          }
      }      
  }
  return res;
}

// level 1 Decode
function level1decode(){
   let text = document.getElementById('ciphertext2').value;
   document.getElementById('plaintext2').innerHTML = caesar_cipher_decrypt(text, x2);
} 

// level 2 Decode
function level2decode(){
   let text = document.getElementById('ciphertext4').value;
   document.getElementById('plaintext4').innerHTML = caesar_cipher_decrypt(rail_fance_decrypt(text, key2), x4);
} 

function caesar_cipher_decrypt(text, shift){
    let res = ""
    for(let i = 0; i < text.length; i++){
        let char = text.charAt(i);
        if(lowerCase(char)){
            if((char.charCodeAt(0)-97) < shift){
              res += String.fromCharCode((26+(char.charCodeAt(0)-shift-97))%26 + 97);
            }
            else{
              res += String.fromCharCode((char.charCodeAt(0)-shift-97)%26 + 97);   
            }
            // console.log(char.charCodeAt(0)-shift-97);
        }
        else if(upperCase(char)){
            if((char.charCodeAt(0)-65) < shift){
              res += String.fromCharCode((26+(char.charCodeAt(0)-shift-65))%26 + 65);
            }
            else{
              res += String.fromCharCode((char.charCodeAt(0)-shift-65)%26 + 65);
            }
            // console.log(char.charCodeAt(0)-shift-65);
        }
        else{
            res += char;
        }
    }
    return res;
}

function rail_fance_decrypt(text2, key){
    let col = Math.floor((text2.length+1)/key);
    let row = key;
    let len = (text2.length-1) - ((col-1)*key);
    let k = 0;
    let res = "";
    let matrix = new Array(col);
    for(let i = 0; i <= col; i ++){
        matrix[i] = new Array(row);
    }
    for(let i = 0; i < row; i ++){
      for(let j = 0; j < col; j ++){
        if(k < text2.length){
          if(j == col){
            if(len != 0){
              matrix[i][j] = text2.charAt(k);
              k++;
              len --;
            }
            else{
              matrix[i][j] = '~';
            }
          }
          else{
            matrix[i][j] = text2.charAt(k);
            k++;
          }
        }
      }
    }
    for(let j = 0; j < col; j++){
      for(let i = 0; i < row; i++){
        if(matrix[i][j] == '~'){
          break;
        }
        res += matrix[i][j];
      }
    }
    let lenRes = res.length - 9;
    return res.substring(0, lenRes);
}

function lowerCase(char){
    if(char.charCodeAt(0)>=97 && char.charCodeAt(0)<=123){
       return true;
    }
    return false;
}
function upperCase(char){
   if(char.charCodeAt(0)>=65 && char.charCodeAt(0)<=90){
        return true;
   }
   return false;
}

function decoderl1(){
  encodel1.style.display = 'none';
  decodel1.style.display = 'flex';
}

function encoderl1(){
  decodel1.style.display = 'none';
  encodel1.style.display = 'flex';
}

function decoderl2(){
  encodel2.style.display = 'none';
  decodel2.style.display = 'flex';
}

function encoderl2(){
  decodel2.style.display = 'none';
  encodel2.style.display = 'flex';
}

function level1(){
   Level2.style.display = 'none';
   Level1.style.display = 'flex';
}

function level2(){
   Level1.style.display = 'none';
   Level2.style.display = 'flex';
}
  </script>
</body>
</html>